<div class="container">
  <h1>Task Management App</h1>
  
  <!-- Search and Filter Section -->
  <div class="filters">
    <input 
      type="text" 
      placeholder="Search tasks..." 
      (input)="onSearchChange($event)"
      class="search-input">
    
    <select (change)="onFilterChange($event)" class="filter-select">
      <option value="ALL">All Tasks</option>
      <option value="TODO">To Do</option>
      <option value="IN_PROGRESS">In Progress</option>
      <option value="DONE">Done</option>
    </select>
  </div>

  <!-- Task Form -->
  <div class="task-form">
    <h3>{{ isEditing() ? 'Edit Task' : 'Add New Task' }}</h3>
    
    <input 
      type="text" 
      placeholder="Task title" 
      [value]="currentTask().title"
      (input)="updateTaskField('title', $event)"
      class="form-input">
    
    <textarea 
      placeholder="Task description" 
      [value]="currentTask().description || ''"
      (input)="updateTaskField('description', $event)"
      class="form-textarea"></textarea>
    
    <select 
      [value]="currentTask().status"
      (change)="updateTaskField('status', $event)"
      class="form-select">
      <option value="TODO">To Do</option>
      <option value="IN_PROGRESS">In Progress</option>
      <option value="DONE">Done</option>
    </select>
    
    <div class="form-buttons">
      <button 
        (click)="isEditing() ? updateTask() : createTask()" 
        class="btn btn-primary">
        {{ isEditing() ? 'Update Task' : 'Create Task' }}
      </button>
      
      <button 
        (click)="resetForm()" 
        class="btn btn-secondary">
        Cancel
      </button>
    </div>
  </div>

  <!-- Task List -->
  <div class="task-list">
    <h3>Tasks ({{ filteredTasks().length }})</h3>
    
    <div *ngIf="filteredTasks().length === 0" class="no-tasks">
      No tasks found.
    </div>
    
    <div *ngFor="let task of filteredTasks()" class="task-card">
      <div class="task-header">
        <h4>{{ task.title }}</h4>
        <span class="status-badge" [class]="'status-' + task.status.toLowerCase()">
          {{ task.status.replace('_', ' ') }}
        </span>
      </div>
      
      <p *ngIf="task.description" class="task-description">{{ task.description }}</p>
      
      <div class="task-meta">
        <small>Created: {{ task.createdDate | date:'short' }}</small>
      </div>
      
      <div class="task-actions">
        <button (click)="editTask(task)" class="btn btn-edit">Edit</button>
        <button (click)="deleteTask(task.id!)" class="btn btn-delete">Delete</button>
      </div>
    </div>
  </div>
</div>